@page "/entry/{id:Guid}"
@model EntryModel
@{
    ViewData["Title"] = "Warp";
}

<partial name="Shared/_Header" />
<div class="warp-container flex-container flex-direction-column vh100">
    <div class="expiration-message-container flex-container flex-direction-row justify-space-between">
        <div>
            @Model.ExpiresIn
        </div>
        <div>
            @Model.ViewCount
        </div>
    </div>
    <div class="gallery flex-container flex-direction-column align-center">
        @foreach (var url in Model.ImageUrls)
        {
            <img src=@url/>
        }
    </div>
    <div class="warp-content-container">
        @Html.Raw(Model.TextContent)
    </div>
    <div class="button-bar flex-container flex-direction-row justify-flex-end">
        <partial name="Shared/Components/_TertiaryButton" model="@Model.CopyButtonModel" />
        <partial name="Shared/Components/_TertiaryButton" model="@Model.ReportButtonModel" />
    </div>
</div>
<partial name="Shared/_Promo" />
<partial name="Shared/_Footer" />
<partial name="Shared/_ModalWindow" model="@Model.ModalWindowModel"/>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        let copyButton = document.getElementById('copy-url-button');
        copyButton.onclick = () => copyUrl(copyButton);

        let modalAction = document.getElementById('modal-action');
        modalAction.onclick = () => report('@Model.Id');

        let reportButton = document.getElementById('report-button');
        reportButton.onclick = (e) => showModal(e);
    });
</script>
